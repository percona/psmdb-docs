.. _PSMDB-6.0.3-3:

================================================================================
*Percona Server for MongoDB* 6.0.3-2 (2022-12-07)
================================================================================

:Date: December 7, 2022
:Installation: `Installing Percona Server for MongoDB <https://www.percona.com/doc/percona-server-for-mongodb/6.0/install/index.html>`_


Percona Server for MongoDB 6.0.3-2 is an enhanced, source-available, and highly-scalable database that is a
fully-compatible, drop-in replacement for `MongoDB 6.0.3 Community edition <https://www.mongodb.com/docs/manual/release-notes/6.0/#6.0.3---nov-21--2022>`_. 

|PSMDB| 6.0.3-2 fully supports MongoDB 6.0 protocols and drivers and does not require any code modifications.

Release Highlights
==================

Improvements and bug fixes, provided by MongoDB and included in |PSMDB| are the following:

* `SERVER-68541 <https://jira.mongodb.org/browse/SERVER-68541>`_ - Fixed the condition where issuing concurrent ``removeShard`` and ``movePrimary`` commands may delete unsharded collections in a database thus causing data loss.
* `SERVER-68139 <https://jira.mongodb.org/browse/SERVER-68139>`_ - Fixed the issue with the resharding command failure if the required projection sort relating to sample chunks and planned number of initial chunks is greater than 100MB.
* `SERVER-69756 <https://jira.mongodb.org/browse/SERVER-69756>`_ - Corrected a situation where the order of Resharding steps could cause segmentation faults
* `SERVER-69861 <https://jira.mongodb.org/browse/SERVER-69861>`_ - Corrected a situation where a requested stepdown could run into an uninterruptible lock during the election process and cause a deadlock.
* `SERVER-68394 <https://jira.mongodb.org/browse/SERVER-68394>`_ - Prevented yielding strong locks upon startup recovery when ``_id`` index is missing
* `SERVER-66289 <https://jira.mongodb.org/browse/SERVER-66289>`_ - Fixed the issue with how the server handles batches of writes when running $out with secondary read preference by updating write size estimation logic in ``DocumentSourceWriter``
* `SERVER-68115 <https://jira.mongodb.org/browse/SERVER-68115>`_ - Prevented dropping empty path component from `elemMatch` path during index selection
* `SERVER-68394 <https://jira.mongodb.org/browse/SERVER-68394>`_ - Prevented yielding strong locks upon startup recovery when ``_id`` index is missing

 
Find the full list of new features and improvements in `MongoDB 6.0.3 Community Edition release notes <https://www.mongodb.com/docs/manual/release-notes/6.0/#6.0.3---nov-21--2022>`_.



Improvements
===========================

* :jirabug:`PSMDB-1181`: Add backup cursor parameters to cursor's metadata
  

Bugs Fixed
================================================================================

* :jirabug:`PSMDB-1175`: Fixed |PSMDB| behavior when calling ``$backupCursor`` with ``disableIncrementalBackup`` option




.. include:: ../res/replace.txt